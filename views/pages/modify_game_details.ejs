<!DOCTYPE html>
<html lang="en">
<head>
    <%- include ("../partials/head.ejs") %>

    <title>Mnemosis | Modify Game</title>
    <link rel="stylesheet" href="../../css/modify_game.css">
</head>
<body>
    <%- include ("../partials/header.ejs") %>
    <div class="container mt-5 mb-5" id="main-box">
        <h2 class="subheading" style="text-align: center">Modifying a Game</h2>
        <form action="<%= game._id %>/modify" method="post">
            <div class="form-group">
                <label for="game_title" class="subheading">Game Title:</label>
                <input class="form-control subheading" type="text" placeholder="Your title" id="game_title" name="title" value="<%= game.title %>" required>
                <p id="game_title_error" class="error"><%= details.titleError %></p>
            </div>
            <div class="form-group">
                <label for="game_description" class="subheading">Description:</label>
                <textarea class="form-control subheading" placeholder="Your description" id="game_description" name="description" required><%= game.description %></textarea>
                <p id="game_description_error" class="error"><%= details.descriptionError %></p>
            </div>
            <div class="form-group">
                <label for="game_duration" class="subheading">Game Duration (minutes):</label>
                <input class="subheading" type="number" id="game_duration" min="3" max="10" placeholder="*" name="time" value="<%= game.time %>" required>
                <p id="game_duration_error" class="error"><%= details.timeError %></p>
            </div>
            <div class="form-group">
                <label for="genre-buttons" class="subheading">Genre(s):</label>
                <div id="genre-buttons" class="text-center">
                    <div class="btn-group" style="display: block; margin: auto">
                        <input type="checkbox" id="check-art" class="btn subheading bg-art genre" name="art" value="art"<% if (game.genres.includes("art")) { %> checked<% } %>><label for="art" class="btn subheading bg-art ml-1 mr-4 genre <% if (game.genres.includes("art")) { %>active<% } %>" id="filter-by-art" >Art</label>
                        <input type="checkbox" id="check-business" class="btn subheading bg-business genre" name="business" value="business"<% if (game.genres.includes("business")) { %> checked<% } %>><label for="business" class="btn subheading bg-business ml-1 mr-4 genre <% if (game.genres.includes("business")) { %>active<% } %>" id="filter-by-business">Business</label>
                        <input type="checkbox" id="check-scitech" class="btn subheading bg-scitech genre" name="scitech" value="scitech"<% if (game.genres.includes("scitech")) { %> checked<% } %>><label for="scitech" class="btn subheading bg-scitech ml-1 mr-4 genre <% if (game.genres.includes("scitech")) { %>active<% } %>" id="filter-by-scitech">Science and Technology</label>
                        <input type="checkbox" id="check-history" class="btn subheading bg-history genre" name="history" value="history"<% if (game.genres.includes("history")) { %> checked<% } %>><label for="history" class="btn subheading bg-history ml-1 mr-4 genre <% if (game.genres.includes("history")) { %>active<% } %>" id="filter-by-history">History</label>
                        <input type="checkbox" id="check-trivia" class="btn subheading bg-trivia genre" name="trivia" value="trivia"<% if (game.genres.includes("trivia")) { %> checked<% } %>><label for="trivia" class="btn subheading bg-trivia ml-1 mr-4 genre <% if (game.genres.includes("trivia")) { %>active<% } %>" id="filter-by-trivia">Trivia</label>
                        <input type="checkbox" id="check-sports" class="btn subheading bg-sports genre" name="sports" value="sports"<% if (game.genres.includes("sports")) { %> checked<% } %>><label for="sports" class="btn subheading bg-sports ml-1 mr-4 genre <% if (game.genres.includes("sports")) { %>active<% } %>" id="filter-by-sports">Sports</label>
                        <input type="checkbox" id="check-others" class="btn subheading bg-others genre" name="others" value="others"<% if (game.genres.includes("others")) { %> checked<% } %>><label for="others" class="btn subheading bg-others ml-1 mr-4 genre <% if (game.genres.includes("others")) { %>active<% } %>" id="filter-by-others">Others</label>
                    </div>
                </div>
                <p id="genre_error" class="error"><%= details.genreError %></p>
            </div>
            <div id="questions_form">
                <% items.forEach(function(item, index) { %>
                <div class="form-inline row mb-1" id="form<%= index+1 %>">
                    <div class="col-2"><label class="subheading">Question <%= index+1 %>:</label></div>
                    <div class="col-6"><input type="text" class="form-control subheading question" size="60" placeholder="Your question" id="question<%= index+1 %>" name="question<%= index+1 %>" value="<%= item.question %>" required></div>
                    <div class="col-3"><input type="text" class="form-control subheading answer" size="25" placeholder="Your answer" id="answer<%= index+1 %>" name="answer<%= index+1 %>" value="<%= item.answer %>" required></div>
                    <div class="col"><button type="button" class="btn btn-danger delete" id="delete<%= index+1 %>">&times;</button></div>
                </div>
                <% }) %>
                <div class="form-inline row justify-content-center">
                    <button type="button" class="btn btn-block" id="add_question">+</button>
                </div>
            </div>
            <p id="questions_form_error" class="error"><%= details.formError %></p>
            <div class="row"><div class="col-sm-12"><br></div></div>
            <input type="submit" class="btn btn-custom btn-block subheading" id="modify_game" value="Save Changes">
            <div class="row"><div class="col-sm-12"><br></div></div>
        </form>
    </div>

    <%- include ("../partials/footer.ejs") %>

    <script src="../../js/modify_game_details.js"></script>
    <script src="/js/validator.min.js" type="text/javascript"></script>
</body>
</html>